<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>微信小程序开发 | 技术学派</title>
    <meta name="description" content="Web前端技术、干货、教程、课程笔记">
    <link rel="icon" href="/favicon.ico">
  <meta name="robots" content="all">
  <meta name="author" content="likang">
  <meta name="keywords" content="Web全栈知识体系, web体系, web知识体系, web框架, web详解, web学习路线, web spring, web面试, 知识体系, web技术体系, web编程, web编程指南,web开发体系, web开发,web教程,web,web数据结构, 算法, 开发基础">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <script src="https://hm.baidu.com/hm.js?a2fd998a0322a08f10309f035d7009e1"></script>
    
    <link rel="preload" href="/assets/css/0.styles.c9eb7bf0.css" as="style"><link rel="preload" href="/assets/js/app.36f33a9d.js" as="script"><link rel="preload" href="/assets/js/2.d27f56d2.js" as="script"><link rel="preload" href="/assets/js/28.50943c3b.js" as="script"><link rel="prefetch" href="/assets/js/10.d1e6c66a.js"><link rel="prefetch" href="/assets/js/11.29746d89.js"><link rel="prefetch" href="/assets/js/12.0605b152.js"><link rel="prefetch" href="/assets/js/13.3b6be312.js"><link rel="prefetch" href="/assets/js/14.e0cf0d42.js"><link rel="prefetch" href="/assets/js/15.86f20d18.js"><link rel="prefetch" href="/assets/js/16.a660308b.js"><link rel="prefetch" href="/assets/js/17.2c6ab243.js"><link rel="prefetch" href="/assets/js/18.e8ce1763.js"><link rel="prefetch" href="/assets/js/19.34c3af53.js"><link rel="prefetch" href="/assets/js/20.3fa7618a.js"><link rel="prefetch" href="/assets/js/21.4c157aad.js"><link rel="prefetch" href="/assets/js/22.47eb5636.js"><link rel="prefetch" href="/assets/js/23.cd435639.js"><link rel="prefetch" href="/assets/js/24.990a63e1.js"><link rel="prefetch" href="/assets/js/25.47122bec.js"><link rel="prefetch" href="/assets/js/26.05b4f7ae.js"><link rel="prefetch" href="/assets/js/27.9ab1d9bc.js"><link rel="prefetch" href="/assets/js/29.bd08d43b.js"><link rel="prefetch" href="/assets/js/3.2c8e19c4.js"><link rel="prefetch" href="/assets/js/30.cd670f1e.js"><link rel="prefetch" href="/assets/js/31.fc962975.js"><link rel="prefetch" href="/assets/js/32.16de1a8c.js"><link rel="prefetch" href="/assets/js/33.5331101e.js"><link rel="prefetch" href="/assets/js/34.1df38d3f.js"><link rel="prefetch" href="/assets/js/35.2e0c63f6.js"><link rel="prefetch" href="/assets/js/4.e3d63e9c.js"><link rel="prefetch" href="/assets/js/5.0fc728f0.js"><link rel="prefetch" href="/assets/js/6.596668dc.js"><link rel="prefetch" href="/assets/js/7.5a102747.js"><link rel="prefetch" href="/assets/js/8.53b312d6.js"><link rel="prefetch" href="/assets/js/9.0ec4f429.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c9eb7bf0.css">   
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">技术学派</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/notes/" class="nav-link router-link-active">主线课程大纲</a></div><div class="nav-item"><a href="/techs.html" class="nav-link">技术栈</a></div><div class="nav-item"><a href="/nav.html" class="nav-link">网站导航</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端编码规范" class="dropdown-title"><span class="title">前端编码规范</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/rules/html.html" class="nav-link">HTML 编码规范</a></li><li class="dropdown-item"><!----> <a href="/rules/css.html" class="nav-link">CSS 编码规范</a></li><li class="dropdown-item"><!----> <a href="/rules/js.html" class="nav-link">JavaScript 编码规范</a></li><li class="dropdown-item"><!----> <a href="/specification.html" class="nav-link">文档编写规范</a></li></ul></div></div><div class="nav-item"><a href="/tips.html" class="nav-link">学习建议</a></div><div class="nav-item"><a href="/discuss.html" class="nav-link">留言</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/notes/" class="nav-link router-link-active">主线课程大纲</a></div><div class="nav-item"><a href="/techs.html" class="nav-link">技术栈</a></div><div class="nav-item"><a href="/nav.html" class="nav-link">网站导航</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端编码规范" class="dropdown-title"><span class="title">前端编码规范</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/rules/html.html" class="nav-link">HTML 编码规范</a></li><li class="dropdown-item"><!----> <a href="/rules/css.html" class="nav-link">CSS 编码规范</a></li><li class="dropdown-item"><!----> <a href="/rules/js.html" class="nav-link">JavaScript 编码规范</a></li><li class="dropdown-item"><!----> <a href="/specification.html" class="nav-link">文档编写规范</a></li></ul></div></div><div class="nav-item"><a href="/tips.html" class="nav-link">学习建议</a></div><div class="nav-item"><a href="/discuss.html" class="nav-link">留言</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>微信小程序开发</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第一章-入门" class="sidebar-link">第一章  入门</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第一节-简介" class="sidebar-link">第一节 简介</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第二节-开发者工具" class="sidebar-link">第二节 开发者工具</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第三节-默认架构分析" class="sidebar-link">第三节 默认架构分析</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第四节-全局配置" class="sidebar-link">第四节 全局配置</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第五节-hello-world" class="sidebar-link">第五节 hello world</a></li></ul></li><li><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第二章-页面视图" class="sidebar-link">第二章 页面视图</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第一节-wxml结构文件" class="sidebar-link">第一节 WXML结构文件</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第二节-渲染" class="sidebar-link">第二节 渲染</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第三节-wxss样式文件" class="sidebar-link">第三节 WXSS样式文件</a></li></ul></li><li><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第三章-输入" class="sidebar-link">第三章 输入</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第一节-输入组件" class="sidebar-link">第一节 输入组件</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第二节-双向绑定" class="sidebar-link">第二节 双向绑定</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第三节-表单" class="sidebar-link">第三节 表单</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第四节-输入验证" class="sidebar-link">第四节 输入验证</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第五节-分享" class="sidebar-link">第五节 分享</a></li></ul></li><li><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第四章-事件" class="sidebar-link">第四章 事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第一节-事件绑定" class="sidebar-link">第一节 事件绑定</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第二节-事件对象" class="sidebar-link">第二节 事件对象</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第三节-生命周期" class="sidebar-link">第三节  生命周期</a></li></ul></li><li><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第五章-微信原生api" class="sidebar-link">第五章 微信原生API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第一节-promise化异步api" class="sidebar-link">第一节 Promise化异步API</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第二节-网络请求api" class="sidebar-link">第二节 网络请求API</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第三节-媒体api" class="sidebar-link">第三节 媒体API</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第四节-地位api" class="sidebar-link">第四节 地位API</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第五节-存储api" class="sidebar-link">第五节 存储API</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第五节-扫码" class="sidebar-link">第五节 扫码</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第六节-生成二维码" class="sidebar-link">第六节 生成二维码</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第七节-设备-api" class="sidebar-link">第七节 设备 API</a></li></ul></li><li><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第六章-路由" class="sidebar-link">第六章 路由</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第一节-页面栈" class="sidebar-link">第一节  页面栈</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第二节-导航的两种方式" class="sidebar-link">第二节 导航的两种方式</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第三节-路由传参" class="sidebar-link">第三节 路由传参</a></li></ul></li><li><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第七章-模板" class="sidebar-link">第七章 模板</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第一节-include" class="sidebar-link">第一节 include</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第二节-template" class="sidebar-link">第二节 template</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第三节-import" class="sidebar-link">第三节 import</a></li></ul></li><li><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第八章-组件" class="sidebar-link">第八章 组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第二节-组件的使用" class="sidebar-link">第二节 组件的使用</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第三节-组件的封装" class="sidebar-link">第三节 组件的封装</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第四节-组件的属性" class="sidebar-link">第四节 组件的属性</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第五节-组件的事件" class="sidebar-link">第五节 组件的事件</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第六节-插槽" class="sidebar-link">第六节 插槽</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第七节-组件生命周期" class="sidebar-link">第七节 组件生命周期</a></li></ul></li><li><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第九章-管理后台" class="sidebar-link">第九章 管理后台</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#云服务" class="sidebar-link">云服务</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#客服" class="sidebar-link">客服</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#上线发布" class="sidebar-link">上线发布</a></li></ul></li><li><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第十章-小程序框架" class="sidebar-link">第十章 小程序框架</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第一节-发展现状" class="sidebar-link">第一节 发展现状</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第二节-mpx介绍" class="sidebar-link">第二节 MPX介绍</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第三节-mpx的特性与底层原理" class="sidebar-link">第三节 MPX的特性与底层原理</a></li></ul></li><li><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#附录：" class="sidebar-link">附录：</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#第三方组件" class="sidebar-link">第三方组件</a></li><li class="sidebar-sub-header"><a href="/notes/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/#小程序快捷键" class="sidebar-link">小程序快捷键</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="微信小程序开发"><a href="#微信小程序开发" class="header-anchor">#</a> 微信小程序开发</h1> <h1 id="第一篇-mvc"><a href="#第一篇-mvc" class="header-anchor">#</a> 第一篇 MVC</h1> <h2 id="第一章-入门"><a href="#第一章-入门" class="header-anchor">#</a> 第一章  入门</h2> <h3 id="第一节-简介"><a href="#第一节-简介" class="header-anchor">#</a> 第一节 简介</h3> <ul><li><p>微信用户量大（7亿）,新技术,潜力大</p></li> <li><p>扫码即用,不需要下载</p></li> <li><p>与普通app比较</p> <ul><li>运行在微信平台上(WebView)</li> <li>调用微信的api接口</li> <li>获取微信用户信息</li></ul></li></ul> <h3 id="第二节-开发者工具"><a href="#第二节-开发者工具" class="header-anchor">#</a> 第二节 开发者工具</h3> <ul><li>下载安装 <strong>微信web开发者工具</strong></li> <li><a href="https://mp.weixin.qq.com/" target="_blank" rel="noopener noreferrer">注册微信开发账户<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://developers.weixin.qq.com/miniprogram/dev/api/" target="_blank" rel="noopener noreferrer">开发文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>使用注册开发账户的微信扫描登陆 微信web开发者工具</li> <li>创建项目(无appID，部分功能受限)</li></ul> <h3 id="第三节-默认架构分析"><a href="#第三节-默认架构分析" class="header-anchor">#</a> 第三节 默认架构分析</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>├──pages                           存放页面的目录 
│   ├── index                      index页面目录
│   │     ├── index.js             
│   │     ├── index.json
│   │     ├── index.wxml
│   │     └── index.wxss
│   └── logs                       logs页面目录
│   │     ├── logs.js
│   │     ├── logs.json
│   │     ├── logs.wxml
│   │     └── logs.wxss
├── utils                          存放工具模块目录
│    └── util.js                   自定义工具模块
├── app.js                         主入口文件
├── app.json                       全局配置文件
├── app.wxss                       全局样式文件
└── project.config.json            开发工具配置文件
   
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="三个app相关文件"><a href="#三个app相关文件" class="header-anchor">#</a> 三个APP相关文件</h4> <p>一个小程序主体部分由三个app文件组成，必须放在项目的根目录，如下：</p> <table><thead><tr><th>文件</th> <th>必填</th> <th>作用</th></tr></thead> <tbody><tr><td>app.js</td> <td>是</td> <td>小程序逻辑， 使用<code>App()</code>函数注册小程序</td></tr> <tr><td>app.json</td> <td>是</td> <td>小程序公共设置 （注意： 该文件是json格式，不能写任何注释）</td></tr> <tr><td>app.wxss</td> <td>否</td> <td>公共样式表</td></tr></tbody></table> <h4 id="project-config-json"><a href="#project-config-json" class="header-anchor">#</a> project.config.json</h4> <p>项目配置文件，包括：编译配置，AppID、代码上传时自动压缩等等一系列选项。</p> <h4 id="pages目录"><a href="#pages目录" class="header-anchor">#</a> pages目录</h4> <p>用来保存不同的页面，通常，将文件以目录形式，分别保存在不同的目录中。</p> <h3 id="第四节-全局配置"><a href="#第四节-全局配置" class="header-anchor">#</a> 第四节 全局配置</h3> <p>三个app文件中，app.wxss用于保存全局样式，app.js 主程序入口 和app.json需要进行全局配置。</p> <h4 id="app-json"><a href="#app-json" class="header-anchor">#</a> app.json</h4> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html" target="_blank" rel="noopener noreferrer">app.json<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>全局的配置文件，基本结构如下：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;pages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;pages/index/index&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;pages/logs/index&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;window&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;navigationBarTitleText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Demo&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tabBar&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/index/index&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;首页&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> 
        <span class="token punctuation">{</span>
          <span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/logs/logs&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;日志&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;networkTimeout&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;request&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;downloadFile&quot;</span><span class="token operator">:</span> <span class="token number">10000</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;debug&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><table><thead><tr><th>属性</th> <th>类型</th> <th>必填</th> <th>描述</th></tr></thead> <tbody><tr><td>pages</td> <td>String Array</td> <td>是</td> <td>设置页面路径</td></tr> <tr><td>window</td> <td>Object</td> <td>否</td> <td>设置状态栏、导航条、标题、窗口背景色。</td></tr> <tr><td>tabBar</td> <td>Object</td> <td>否</td> <td>设置底部 tab</td></tr> <tr><td>networkTimeout</td> <td>Object</td> <td>否</td> <td>设置网络超时时间</td></tr> <tr><td>debug</td> <td>Boolean</td> <td>否</td> <td>设置是否开启 debug 模式</td></tr></tbody></table> <h5 id="pages"><a href="#pages" class="header-anchor">#</a> Pages</h5> <p>是一个数组，它声明了小程序有哪些页面，新建一个页面后，会自动将新建的页面添加到pages数组中。</p> <h5 id="window"><a href="#window" class="header-anchor">#</a> window</h5> <p>用于设置小程序的状态栏、导航条、标题、窗口背景色。 （这些样式不能在wxss里控制，因为wxml没有定义顶部标题的标签）：</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>默认值</th> <th>描述</th></tr></thead> <tbody><tr><td>navigationBarBackgroundColor</td> <td>HexColor</td> <td>#000000</td> <td>导航栏背景颜色</td></tr> <tr><td>navigationBarTextStyle</td> <td>String</td> <td>white</td> <td>导航栏标题颜色，仅支持 black/white</td></tr> <tr><td>navigationBarTitleText</td> <td>String</td> <td></td> <td>导航栏标题文字内容</td></tr> <tr><td>backgroundColor</td> <td>HexColor</td> <td><code>#ffffff</code></td> <td>窗口背景色</td></tr> <tr><td>backgroundTextStyle</td> <td>String</td> <td>dark</td> <td>下拉背景字体、loading 图的样式，仅支持 dark/light</td></tr> <tr><td>enablePullDownRefresh</td> <td>Boolean</td> <td>false</td> <td>是否开启下拉刷新</td></tr></tbody></table> <h5 id="tabbar"><a href="#tabbar" class="header-anchor">#</a> tabBar</h5> <p>是多页面切换卡，如果小程序是一个多 tab 应用，可以通过 tabBar 配置项指定 tab 栏的表现，以及 tab 切换时显示的对应页面。 tabBar相关属性定义说明：</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>必填</th> <th>默认值</th> <th>描述</th></tr></thead> <tbody><tr><td>color</td> <td>HexColor</td> <td>是</td> <td></td> <td>tab 上的文字默认颜色</td></tr> <tr><td>selectedColor</td> <td>HexColor</td> <td>是</td> <td></td> <td>tab 上的文字选中时的颜色</td></tr> <tr><td>backgroundColor</td> <td>HexColor</td> <td>是</td> <td></td> <td>tab 的背景色</td></tr> <tr><td>borderStyle</td> <td>String</td> <td>否</td> <td>black</td> <td>tabbar上边框的颜色， 仅支持 black/white</td></tr> <tr><td>list</td> <td>Array</td> <td>是</td> <td></td> <td>tab 的列表，详见 list 属性说明，最少2个、最多5个 tab</td></tr> <tr><td>position</td> <td>String</td> <td>否</td> <td>bottom</td> <td>可选值 bottom、top</td></tr></tbody></table> <p>tabBar list定义说明：</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>必填</th> <th>说明</th></tr></thead> <tbody><tr><td>pagePath</td> <td>String</td> <td>是</td> <td>页面路径，必须在 pages 中先定义</td></tr> <tr><td>text</td> <td>String</td> <td>是</td> <td>tab 上按钮文字</td></tr> <tr><td>iconPath</td> <td>String</td> <td>是</td> <td>图片路径，icon 大小限制为40KB，建议尺寸为 81px * 81px</td></tr> <tr><td>selectedIconPath</td> <td>String</td> <td>是</td> <td>选中时的图片路径，icon 大小限制为40KB，建议尺寸为 81px * 81px</td></tr></tbody></table> <p>除了基本设置以外，还可以通过设置 <a href="https://developers.weixin.qq.com/miniprogram/dev/api/ui-tabbar.html" target="_blank" rel="noopener noreferrer">tabBar相关API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 定义tabbar的其他设置，例如：角标、红点、显示/隐藏</p> <p><strong>注意：</strong></p> <p>正确书写时tabBar，不要写成tabbar</p> <p>首页默认的是index的目录，如果添加新的页面，不在pages中添加index目录，也会导致tabBar不显示</p> <p>当设置 position 为 top 时，将不会显示 icon</p> <p>tabBar 是一个数组，只能配置<strong>最少2个、最多5个 tab</strong>，tab 按数组的顺序排序。</p> <h5 id="page配置文件"><a href="#page配置文件" class="header-anchor">#</a> page配置文件</h5> <p>每一个小程序页面也可以使 .json 文件来对本页面的窗口表现进行配置。 页面的配置比app.json全局配置简单得多，只是设置 app.json 中的 window 配置项的内容，页面中配置项会覆盖 app.json 的 window 中相同的配置项。</p> <p><strong>注意：页面的  .json  只能设置window 相关的配置项，以决定本页面的窗口表现，所以无需写window。</strong></p> <h4 id="app-js"><a href="#app-js" class="header-anchor">#</a> app.js</h4> <table><thead><tr><th>命令</th> <th>说明</th></tr></thead> <tbody><tr><td>App()</td> <td>注册小程序，接受一个 object 参数，其指定小程序的<strong>生命周期函数</strong>等</td></tr> <tr><td>getApp()</td> <td>获取到小程序实例。</td></tr></tbody></table> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/app.html" target="_blank" rel="noopener noreferrer">app()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的object参数说明：</p> <table><thead><tr><th>生命周期函数</th> <th>类型</th> <th>描述</th> <th>触发时机</th></tr></thead> <tbody><tr><td>onLaunch</td> <td>Function</td> <td>监听小程序初始化</td> <td>当小程序初始化完成时触发（全局只触发一次）</td></tr> <tr><td>onShow</td> <td>Function</td> <td>监听小程序显示</td> <td>当小程序启动，或从后台进入前台时触发</td></tr> <tr><td>onHide</td> <td>Function</td> <td>监听小程序隐藏</td> <td>当小程序从前台进入后台时触发</td></tr></tbody></table> <table><thead><tr><th>其他参数</th> <th>类型</th> <th>描述</th> <th>触发时机</th></tr></thead> <tbody><tr><td>onError</td> <td>Function</td> <td>错误监听函数</td> <td>当小程序发生脚本错误或者 api 调用失败时，<br>会触发 onError 并带上错误信息</td></tr> <tr><td>onPageNotFound</td> <td>Function</td> <td>页面不存在监听函数</td> <td>当小程序出现要打开的页面不存在的情况</td></tr> <tr><td>其他</td> <td>Any</td> <td></td> <td>可以添加任意的函数或属性到 Object 参数中<br>用 <code>this</code> 可以访问</td></tr></tbody></table> <h5 id="属性"><a href="#属性" class="header-anchor">#</a> 属性</h5> <table><thead><tr><th>属性</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td>data</td> <td>Object</td> <td>初始化数据</td></tr> <tr><td>route</td> <td>string</td> <td>当前页面的路径（只读属性）</td></tr></tbody></table> <h3 id="第五节-hello-world"><a href="#第五节-hello-world" class="header-anchor">#</a> 第五节 hello world</h3> <p>一个小程序页面由四个文件组成，<strong>四个文件必须具有相同的路径与文件名</strong> ，分别是：</p> <table><thead><tr><th>文件类型</th> <th>必填</th> <th>作用</th></tr></thead> <tbody><tr><td>wxml</td> <td>是</td> <td>页面结构</td></tr> <tr><td>js</td> <td>是</td> <td>页面逻辑</td></tr> <tr><td>json</td> <td>否</td> <td>页面配置</td></tr> <tr><td>wxss</td> <td>否</td> <td>页面样式</td></tr></tbody></table> <p><code>wxml</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{title}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token punctuation">:</span><span class="token punctuation">{</span>
         <span class="token string">&quot;msg&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;hello world&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>wxss</code></p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.title</span><span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span>1rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>上面的代码中，并没有定义index.json文件，这是因为：</p> <p>除了全局的app.json配置外，还可以用 index.json 文件对小程序项目中的每一个页面进行配置，但只能设置本页面的window配置项的内容，index.json 文件中的window配置值将覆盖app.json中的配置值。</p> <h2 id="第二章-页面视图"><a href="#第二章-页面视图" class="header-anchor">#</a> 第二章 页面视图</h2> <h3 id="第一节-wxml结构文件"><a href="#第一节-wxml结构文件" class="header-anchor">#</a> 第一节 WXML结构文件</h3> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/" target="_blank" rel="noopener noreferrer">wxml<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>文件是页面结构，也就是MVC中的V（视图），微信使用特殊标签，定义了容器和常用组件：</p> <p>wxml与html的差别：</p> <ul><li>不支持原生html标签，全部使用小程序组件标签，其中img改为image，input全部改为专用标签。</li> <li>标签要严格结束标记</li></ul> <h4 id="内置组件"><a href="#内置组件" class="header-anchor">#</a> 内置组件</h4> <p>框架为开发者提供了一系列基础组件，开发者可以通过组合这些基础组件进行快速开发。</p> <ul><li>组件是视图层的基本组成单元。</li> <li>组件自带一些功能与微信风格的样式。</li> <li>一个组件通常包括<code>开始标签</code>和<code>结束标签</code>，<code>属性</code>用来修饰这个组件，<code>内容</code>在两个标签之内。</li></ul> <table><thead><tr><th>组件</th> <th>说明</th></tr></thead> <tbody><tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/component/view.html" target="_blank" rel="noopener noreferrer">视图容器<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>用于页面布局的功能块</td></tr> <tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/component/icon.html" target="_blank" rel="noopener noreferrer">基础内容<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>包括图标 文本 进度条等基本元素</td></tr> <tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/component/button.html" target="_blank" rel="noopener noreferrer">表单组件<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>表单元素</td></tr> <tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/component/navigator.html" target="_blank" rel="noopener noreferrer">导航<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>导航元素，类似a标签</td></tr> <tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/component/audio.html" target="_blank" rel="noopener noreferrer">媒体组件<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>图片 音频 视频等</td></tr> <tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/component/map.html" target="_blank" rel="noopener noreferrer">地图<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>地图</td></tr> <tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/component/canvas.html" target="_blank" rel="noopener noreferrer">画布<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>canvas</td></tr> <tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/component/open-data.html" target="_blank" rel="noopener noreferrer">开放能力<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>用来承载网页的容器，会自动铺满整个小程序页面</td></tr></tbody></table> <h5 id="常用布局标签"><a href="#常用布局标签" class="header-anchor">#</a> 常用布局标签</h5> <table><thead><tr><th>标签</th> <th>相当于</th></tr></thead> <tbody><tr><td>&lt;view&gt;&lt;/view&gt;</td> <td>&lt;div&gt;&lt;/div&gt;</td></tr> <tr><td>&lt;text&gt;&lt;/text&gt;</td> <td>&lt;span&gt;&lt;/span&gt;</td></tr> <tr><td>&lt;image&gt;&lt;/image&gt;</td> <td>&lt;img /&gt;</td></tr> <tr><td>&lt;navigator&gt;&lt;/navigator&gt;</td> <td>&lt;a&gt;&lt;/a&gt;</td></tr> <tr><td>&lt;block&gt;&lt;/block&gt;</td> <td></td></tr></tbody></table> <p><strong>注意：image组件默认宽度300px、高度240px，很多时候我们都不需要这个默认宽高，记得手动设置宽高（不能设置height：auto）</strong></p> <h5 id="常用表单标签"><a href="#常用表单标签" class="header-anchor">#</a> 常用表单标签</h5> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>				
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>checkbox</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>radio</span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="轮播图组件"><a href="#轮播图组件" class="header-anchor">#</a> 轮播图组件</h5> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swiper</span> <span class="token attr-name">indicator-dots</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>是否显示面板指示点<span class="token punctuation">&quot;</span></span> <span class="token attr-name">autoplay</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>是否自动切换<span class="token punctuation">&quot;</span></span> <span class="token attr-name">interval</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>自动切换时间间隔<span class="token punctuation">&quot;</span></span> <span class="token attr-name">duration</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>滑动动画时长<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swiper-item</span><span class="token punctuation">&gt;</span></span>
      	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>图片路径1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>375<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>150<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>swiper-item</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swiper-item</span><span class="token punctuation">&gt;</span></span>
      	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>图片路径2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>375<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>150<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>swiper-item</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>swiper</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="组件共同属性"><a href="#组件共同属性" class="header-anchor">#</a> 组件共同属性</h4> <table><thead><tr><th>组件属性</th> <th>类型</th> <th>描述</th> <th>注解</th></tr></thead> <tbody><tr><td>id</td> <td>String</td> <td>组件的唯一标示</td> <td>保持整个页面唯一</td></tr> <tr><td>class</td> <td>String</td> <td>组件的样式类</td> <td>在对应的 WXSS 中定义的样式类</td></tr> <tr><td>style</td> <td>String</td> <td>组件的内联样式</td> <td>可以动态设置的内联样式</td></tr> <tr><td>hidden</td> <td>Boolean</td> <td>组件是否显示</td> <td>所有组件默认显示</td></tr> <tr><td>data-*</td> <td>Any</td> <td>自定义属性</td> <td>组件上触发的事件时，会发送给事件处理函数</td></tr> <tr><td>bind* / catch*</td> <td>EventHandler</td> <td>组件的事件</td> <td>详见<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html" target="_blank" rel="noopener noreferrer">事件<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr></tbody></table> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>Hello {{hi}}.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">bind:</span>tap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>onTap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>hi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="第二节-渲染"><a href="#第二节-渲染" class="header-anchor">#</a> 第二节 渲染</h3> <h4 id="数据渲染"><a href="#数据渲染" class="header-anchor">#</a> 数据渲染</h4> <h5 id="数据显示"><a href="#数据显示" class="header-anchor">#</a> 数据显示</h5> <p>WXML 中的动态数据均来自对应的js文件中 Page 的 data。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!--wxml--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>{{message}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// page.js</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    message<span class="token punctuation">:</span> <span class="token string">'Hello World!'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="属性绑定"><a href="#属性绑定" class="header-anchor">#</a> 属性绑定</h5> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!--wxml--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>{{url}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{url}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">bind:</span>tap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>onTap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>hi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>注意：</strong></p> <ol><li><strong>花括号和引号之间不能有空格</strong></li> <li><strong>不要直接写 checked=&quot;false&quot;，其计算结果是一个字符串，转成 boolean 类型后代表真值。</strong></li></ol> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>checkbox</span> <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>checkbox</span><span class="token punctuation">&gt;</span></span>	其计算结果是一个字符串，转成 boolean 类型后变成了 true
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>checkbox</span> <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{false}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>checkbox</span><span class="token punctuation">&gt;</span></span>	正确写法
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="setdata"><a href="#setdata" class="header-anchor">#</a> setData</h5> <p>微信小程序并不会自动将数据的变化同步到界面上，这个事情需要我们自己主动调用<code>setData</code> 函数来实现。</p> <p><code>setData</code> （Page.prototype.setData）函数用于将数据从逻辑层发送到视图层（异步），同时改变对应的 <code>this.data</code> 的值（同步）。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">onTap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// this.data.hi = 'World'</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    	hi<span class="token punctuation">:</span> <span class="token string">'World'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>hi<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>注意：</strong></p> <ol><li>直接修改 this.data 而不调用 this.setData 是无法改变页面的状态的，还会造成显示与数据不一致。</li> <li>单次设置的数据不能超过1024kB，请尽量避免一次设置过多的数据。</li> <li>请不要把 data 中任何一项的 value 设为 <code>undefined</code> ，否则这一项将不被设置并可能遗留一些潜在问题。</li></ol> <h4 id="列表渲染"><a href="#列表渲染" class="header-anchor">#</a> 列表渲染</h4> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!--wxml--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{array}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> {{item}} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{[1, 2, 3, 4, 5]}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> {{item}} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// page.js</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    array<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="默认变量名"><a href="#默认变量名" class="header-anchor">#</a> 默认变量名</h5> <ul><li>默认数组的当前项的下标变量名默认为 index，数组当前项的变量名默认为 item</li> <li>使用 <code>wx:for-item</code> 可以指定数组当前元素的变量名</li> <li>使用 <code>wx:for-index</code> 可以指定数组当前下标的变量名</li></ul> <h5 id="wx-key"><a href="#wx-key" class="header-anchor">#</a> wx:key</h5> <p>如果列表中项目的位置会动态改变或者有新的项目添加到列表中，并且希望列表中的项目保持自己的特征和状态（如 <a href="https://developers.weixin.qq.com/miniprogram/dev/component/input.html" target="_blank" rel="noopener noreferrer">input<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中的输入内容，<a href="https://developers.weixin.qq.com/miniprogram/dev/component/switch.html" target="_blank" rel="noopener noreferrer">switch<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的选中状态），需要使用 <code>wx:key</code> 来指定列表中项目的唯一的标识符。</p> <p><code>wx:key</code> 的值以两种形式提供</p> <ul><li>字符串，代表在 for 循环的 array 中 item 的某个 property，该 property 的值需要是列表中唯一的字符串或数字，且不能动态改变。</li> <li>保留关键字 <code>*this</code> 代表在 for 循环中的 item 本身，这种表示需要 item 本身是一个唯一的字符串或者数字，如：</li></ul> <p>当数据改变触发渲染层重新渲染的时候，会校正带有 key 的组件，框架会确保他们被重新排序，而不是重新创建，以确保使组件保持自身的状态，并且提高列表渲染时的效率。</p> <h5 id="遍历对象"><a href="#遍历对象" class="header-anchor">#</a> 遍历对象</h5> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{obj}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>for-index</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>key<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>for-item</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>{{key}}:{{value}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="计次循环"><a href="#计次循环" class="header-anchor">#</a> 计次循环</h5> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 循环10次 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{10}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> {{item}} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="条件渲染"><a href="#条件渲染" class="header-anchor">#</a> 条件渲染</h4> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!--wxml--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{view == 'WEBVIEW'}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> WEBVIEW <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>elif</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{view == 'APP'}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> APP <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>else</span><span class="token punctuation">&gt;</span></span> MINA <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// page.js</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    view<span class="token punctuation">:</span> <span class="token string">'MINA'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="hidden"><a href="#hidden" class="header-anchor">#</a> hidden</h5> <h3 id="第三节-wxss样式文件"><a href="#第三节-wxss样式文件" class="header-anchor">#</a> 第三节 WXSS样式文件</h3> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxss.html" target="_blank" rel="noopener noreferrer">WXSS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>(WeiXin Style Sheets)是一套样式语言，用于描述 WXML 的组件样式。</p> <p>WXSS 具有 CSS 大部分特性。同时为了更适合开发微信小程序，WXSS 对 CSS 进行了扩充以及修改 ，WXSS 扩展的特性有：</p> <h4 id="wxss与css差异"><a href="#wxss与css差异" class="header-anchor">#</a> WXSS与CSS差异</h4> <table><thead><tr><th>差异</th> <th>说明</th></tr></thead> <tbody><tr><td>新增rpx尺寸单位</td> <td>详见下节</td></tr> <tr><td>background-image</td> <td>WXSS不支持背景图片（会降低页面的渲染速度），可以将图片转换成base64字符</td></tr> <tr><td>body元素</td> <td>不支持，用page代替</td></tr> <tr><td>* 选择器</td> <td>不支持</td></tr> <tr><td>：active</td> <td>不支持</td></tr></tbody></table> <h5 id="尺寸单位"><a href="#尺寸单位" class="header-anchor">#</a> 尺寸单位</h5> <h6 id="rpx"><a href="#rpx" class="header-anchor">#</a> rpx</h6> <p>rpx（responsive pixel 响应的像素）是微信小程序开发中新出了尺寸单位，小程序规定屏幕宽为<strong>750rpx</strong>。rpx是一个相对像素单位，可以根据屏幕宽度进行自适应。</p> <p>针对移动端的开发，设计稿一般都是以iphone6为标准的。而iphone用的是视网膜屏，即css中设定的1px，在iphone上实际是由2px*2px的像素点组成的。</p> <p>以iphone6为准，屏幕（viewport）宽度375px，共有750个物理像素，则750rpx=350px，即：1rpx=0.5px</p> <p><strong>建议：</strong> 开发微信小程序时设计师可以用 iPhone6 作为视觉稿的标准。</p> <p><strong>注意：</strong> 在较小的屏幕上不可避免的会有一些毛刺，请在开发时尽量避免这种情况。</p> <table><thead><tr><th>设备</th> <th>rpx换算px (屏幕宽度/750)</th> <th>px换算rpx (750/屏幕宽度)</th></tr></thead> <tbody><tr><td>iPhone5</td> <td>1rpx = 0.42px</td> <td>1px = 2.34rpx</td></tr> <tr><td>iPhone6</td> <td>1rpx = 0.5px</td> <td>1px = 2rpx</td></tr> <tr><td>iPhone6 Plus</td> <td>1rpx = 0.552px</td> <td>1px = 1.81rpx</td></tr></tbody></table> <h6 id="rem"><a href="#rem" class="header-anchor">#</a> rem</h6> <p>rem（root em）: 规定屏幕宽度为20rem；1rem = (750/20)rpx 。</p> <h4 id="全局样式与局部样式"><a href="#全局样式与局部样式" class="header-anchor">#</a> 全局样式与局部样式</h4> <p>定义在 <code>app.wxss</code> 中的样式为全局样式，作用于每一个页面。在 page 的 wxss 文件中定义的样式为局部样式，只作用在对应的页面，并会覆盖 app.wxss 中相同的选择器。</p> <h4 id="样式导入"><a href="#样式导入" class="header-anchor">#</a> 样式导入</h4> <p>使用<code>@import</code>语句可以导入外联样式表，<code>@import</code>后跟需要导入的外联样式表的相对路径，用<code>;</code>表示语句结束。</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@import</span> <span class="token string">&quot;common.wxss&quot;</span><span class="token punctuation">;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>案例：</p> <ul><li>reset-button</li></ul> <h5 id="weui"><a href="#weui" class="header-anchor">#</a> weUI</h5> <p><a href="https://weui.io" target="_blank" rel="noopener noreferrer">WeUI<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 是一套同微信原生视觉体验一致的基础样式库，由微信官方设计团队为微信内网页和微信小程序量身设计，令用户的使用感知更加统一。 <a href="https://github.com/Tencent/weui-wxss/" target="_blank" rel="noopener noreferrer">下载<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="第三章-输入"><a href="#第三章-输入" class="header-anchor">#</a> 第三章 输入</h2> <h3 id="第一节-输入组件"><a href="#第一节-输入组件" class="header-anchor">#</a> 第一节 输入组件</h3> <h3 id="第二节-双向绑定"><a href="#第二节-双向绑定" class="header-anchor">#</a> 第二节 双向绑定</h3> <ul><li>输出：
<ul><li>data:</li> <li>setData({})</li></ul></li> <li>输入：
<ul><li>事件</li></ul></li></ul> <h3 id="第三节-表单"><a href="#第三节-表单" class="header-anchor">#</a> 第三节 表单</h3> <h4 id="picker"><a href="#picker" class="header-anchor">#</a> picker</h4> <h4 id="radio"><a href="#radio" class="header-anchor">#</a> radio</h4> <p>案例：</p> <ul><li>二级联动</li></ul> <h3 id="第四节-输入验证"><a href="#第四节-输入验证" class="header-anchor">#</a> 第四节 输入验证</h3> <h3 id="第五节-分享"><a href="#第五节-分享" class="header-anchor">#</a> 第五节 分享</h3> <h2 id="第四章-事件"><a href="#第四章-事件" class="header-anchor">#</a> 第四章 事件</h2> <h3 id="第一节-事件绑定"><a href="#第一节-事件绑定" class="header-anchor">#</a> 第一节 事件绑定</h3> <h4 id="事件列表"><a href="#事件列表" class="header-anchor">#</a> 事件列表</h4> <table><thead><tr><th>类型</th> <th>触发条件</th></tr></thead> <tbody><tr><td>touchstart</td> <td>手指触摸动作开始</td></tr> <tr><td>touchmove</td> <td>手指触摸后移动</td></tr> <tr><td>touchcancel</td> <td>手指触摸动作被打断，如来电提醒，弹窗</td></tr> <tr><td>touchend</td> <td>手指触摸动作结束</td></tr> <tr><td>tap</td> <td>手指触摸后马上离开</td></tr> <tr><td>longpress</td> <td>手指触摸后，超过350ms再离开，如果指定了事件回调函数并触发了这个事件，tap事件将不被触发</td></tr> <tr><td>longtap</td> <td>手指触摸后，超过350ms再离开（推荐使用longpress事件代替）</td></tr> <tr><td>transitionend</td> <td>会在 WXSS transition 或 wx.createAnimation 动画结束后触发</td></tr> <tr><td>animationstart</td> <td>会在一个 WXSS animation 动画开始时触发</td></tr> <tr><td>animationiteration</td> <td>会在一个 WXSS animation 一次迭代结束时触发</td></tr> <tr><td>animationend</td> <td>会在一个 WXSS animation 动画完成时触发</td></tr> <tr><td>touchforcechange</td> <td>在支持 3D Touch 的 iPhone 设备，重按时会触发</td></tr></tbody></table> <h4 id="事件绑定"><a href="#事件绑定" class="header-anchor">#</a> 事件绑定</h4> <p>以<strong>bind</strong>（冒泡）或<strong>catch</strong>（阻止冒泡）开头，然后跟上事件的类型，如：<code>bindtap</code>、<code>catchtouchstart</code>。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!--wxml--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">bind:</span>tap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>add<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> {{count}} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在相应的Page定义中写上相应的事件处理函数，参数是event。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// page.js</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">add</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      count<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="第二节-事件对象"><a href="#第二节-事件对象" class="header-anchor">#</a> 第二节 事件对象</h3> <h4 id="事件对象"><a href="#事件对象" class="header-anchor">#</a> 事件对象</h4> <table><thead><tr><th>属性</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>type</td> <td>String</td> <td>事件类型</td></tr> <tr><td>timeStamp</td> <td>Integer</td> <td>事件生成时的时间戳</td></tr> <tr><td>target</td> <td>Object</td> <td>触发事件的DOM元素</td></tr> <tr><td>currentTarget</td> <td>Object</td> <td>绑定事件的DOM元素</td></tr></tbody></table> <h4 id="事件传参与dataset"><a href="#事件传参与dataset" class="header-anchor">#</a> 事件传参与dataset</h4> <ol><li>定义参数：以<code>data-</code>开头，多个单词由连字符<code>-</code>链接，不能有大写（大写会自动转成小写）如：<code>data-element-type</code>，</li> <li>事件对象 event.currentTarget.dataset 中会将连字符转成驼峰，转换后：<code>elementType</code>。</li></ol> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>//发送页 list.wxml
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">data-id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{item.id}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>run<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>link<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

//list.js
run(ev){
    let id=ev.currentTarget.dataset.id;
    
    //跳转页面
    wx.navigateTo({
      url:&quot;/pages/detail/detail?id=&quot;+id
    })
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="第三节-生命周期"><a href="#第三节-生命周期" class="header-anchor">#</a> 第三节  生命周期</h3> <h4 id="生命周期钩子函数"><a href="#生命周期钩子函数" class="header-anchor">#</a> 生命周期钩子函数</h4> <table><thead><tr><th>生命周期函数</th> <th>说明</th></tr></thead> <tbody><tr><td>onLoad(options)</td> <td>页面加载时触发。一个页面只会调用一次，可以在 onLoad 的参数中获取打开当前页面路径中的参数。 <br>options：接收其他页面的传参</td></tr> <tr><td>onReady</td> <td>页面初次渲染完成时触发。一个页面只会调用一次，代表页面已经准备妥当，可以和视图层进行交互。<br>注意：对界面内容进行设置的 API 如<a href="https://developers.weixin.qq.com/miniprogram/dev/api/wx.setNavigationBarTitle.html" target="_blank" rel="noopener noreferrer"><code>wx.setNavigationBarTitle</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，请在<code>onReady</code>之后进行。</td></tr> <tr><td>onShow</td> <td>页面显示/切入前台时触发。</td></tr> <tr><td>onHide</td> <td>页面隐藏/切入后台时触发。 如 <code>navigateTo</code> 或底部 <code>tab</code> 切换到其他页面，小程序切入后台等。</td></tr> <tr><td>onUnload</td> <td>页面卸载时触发。如<code>redirectTo</code>或<code>navigateBack</code>到其他页面时。</td></tr></tbody></table> <p><img src="images/mina-lifecycle.png" alt="生命周期"></p> <p>案例：</p> <ul><li>页面间传参</li></ul> <h4 id="页面事件处理函数"><a href="#页面事件处理函数" class="header-anchor">#</a> 页面事件处理函数</h4> <p>除了初始化数据和生命周期函数，Page 中还可以定义一些事件处理函数。在渲染层可以在组件中加入事件绑定，当达到触发事件时，就会执行 Page 中定义的事件处理函数。</p> <table><thead><tr><th>页面事件处理函数</th> <th>说明</th></tr></thead> <tbody><tr><td>onPullDownRefresh</td> <td>页面相关事件处理函数--监听用户 下拉刷新动作</td></tr> <tr><td>onReachBottom</td> <td>页面上拉触底事件的处理函数</td></tr> <tr><td>onShareAppMessage</td> <td>用户点击右上角转发</td></tr> <tr><td>onPageScroll</td> <td>页面滚动触发事件的处理函数</td></tr> <tr><td>onResize</td> <td>小程序屏幕旋转时触发</td></tr> <tr><td>onTabItemTap(item)</td> <td>当前是 tab 页时，点击 tab 时触发<br>item：当前tab</td></tr></tbody></table> <h1 id="第二篇-api"><a href="#第二篇-api" class="header-anchor">#</a> 第二篇 API</h1> <h2 id="第五章-微信原生api"><a href="#第五章-微信原生api" class="header-anchor">#</a> 第五章 微信原生API</h2> <p>框架提供丰富的微信原生<a href="https://developers.weixin.qq.com/miniprogram/dev/api/" target="_blank" rel="noopener noreferrer">API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，可以方便的调起微信提供的能力，如获取用户信息，本地存储，支付功能等。</p> <p>在小程序环境中，没有window对象，取而代之的是<strong>wx</strong>对象</p> <table><thead><tr><th>API</th> <th>说明</th></tr></thead> <tbody><tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/api/api-network.html" target="_blank" rel="noopener noreferrer">网络<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>网络请求 上传 下载  webSocket</td></tr> <tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/api/media-picture.html" target="_blank" rel="noopener noreferrer">媒体<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>图片 录音  音频 视频 相机</td></tr> <tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/api/file.html" target="_blank" rel="noopener noreferrer">文件<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>存储 读取 删除</td></tr> <tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/api/data.html" target="_blank" rel="noopener noreferrer">数据缓存<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>每个微信小程序都可以有自己的本地缓存</td></tr> <tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/api/location.html" target="_blank" rel="noopener noreferrer">位置<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>获取位置 查看位置 地图组件控制</td></tr> <tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/api/systeminfo.html" target="_blank" rel="noopener noreferrer">设备<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>系统信息 网络状态 加速度计 罗盘</td></tr> <tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/api/api-react.html" target="_blank" rel="noopener noreferrer">界面<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>交互反馈 设备导航条 设置tabBar 设置置顶信息等</td></tr> <tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/api/ext-api.html" target="_blank" rel="noopener noreferrer">第三方平台<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>获取第三方平台自定义的数据字段。</td></tr> <tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/api/api-login.html" target="_blank" rel="noopener noreferrer">开放接口<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>通过微信官方提供的登录能力方便地获取微信提供的用户身份标识</td></tr> <tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/api/analysis.html" target="_blank" rel="noopener noreferrer">数据<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>开发者通过数据分析接口，可获取到小程序的各项数据指标</td></tr> <tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/api/getUpdateManager.html" target="_blank" rel="noopener noreferrer">更新<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>用于管理小程序更新</td></tr> <tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/api/createWorker.html" target="_blank" rel="noopener noreferrer">多线程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>多线程 Worker</td></tr> <tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/api/monitor-report.html" target="_blank" rel="noopener noreferrer">监控<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>自定义业务数据监控上报接口。</td></tr> <tr><td><a href="https://developers.weixin.qq.com/miniprogram/dev/api/setEnableDebug.html" target="_blank" rel="noopener noreferrer">调试接口<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td>设置是否打开调试开关</td></tr></tbody></table> <p><strong>说明：</strong></p> <ul><li>所有的API都在<strong>wx</strong>对象中。</li> <li>如未特殊约定，API 接口都接受一个object作为参数。</li> <li>object中可以指定<code>success</code>, <code>fail</code>, <code>complete</code>来接收接口调用结果。</li></ul> <table><thead><tr><th>参数名</th> <th>类型</th> <th>必填</th> <th>说明</th></tr></thead> <tbody><tr><td>success</td> <td>Function</td> <td>否</td> <td>接口调用成功的回调函数</td></tr> <tr><td>fail</td> <td>Function</td> <td>否</td> <td>接口调用失败的回调函数</td></tr> <tr><td>complete</td> <td>Function</td> <td>否</td> <td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table> <h3 id="第一节-promise化异步api"><a href="#第一节-promise化异步api" class="header-anchor">#</a> 第一节 Promise化异步API</h3> <p>promise 化 wx.request函数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> lkwx <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

lkwx<span class="token punctuation">.</span><span class="token function-variable function">request</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">success<span class="token punctuation">,</span> fail</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
      <span class="token operator">...</span>params<span class="token punctuation">,</span>
      success<span class="token punctuation">,</span>
      fail<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> lkwx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 将一个函数Promise化</span>
<span class="token keyword">function</span> <span class="token function">promisify</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// fn = wx.request</span>
  <span class="token comment">// 1. 返回一个带obj类型参数的新函数</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// {url:'xxx'}</span>
    <span class="token comment">// 3. Promise化</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">success<span class="token punctuation">,</span> fail</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token comment">// 2. 直接调用原始函数</span>
      <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>params<span class="token punctuation">,</span> success<span class="token punctuation">,</span> fail <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>获取wx中所有的API</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> lkwx <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">in</span> wx<span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
    lkwx<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">promisify</span><span class="token punctuation">(</span>wx<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>还需要排除一些特殊的API，比如非异步API。</p> <p>以下是没有 success、fail、complete 属性的api</p> <ul><li>...Sync</li> <li>on...</li> <li>create... 除了 createBLEConnection</li> <li>...Manager</li> <li>pause...</li> <li>stopRecord、stopVoice、stopBackgroundAudio、stopPullDownRefresh</li> <li>hideKeyboard、hideToast、hideLoading、showNavigationBarLoading、hideNavigationBarLoading</li> <li>canIUse、navigateBack、closeSocket、pageScrollTo、drawCanvas</li></ul> <p>开源项目：wx-promise-pro</p> <h3 id="第二节-网络请求api"><a href="#第二节-网络请求api" class="header-anchor">#</a> 第二节 网络请求API</h3> <p>为了使用ES6中的<code>Promise</code>和<code>async</code>函数，我们需要配置以下两项。</p> <h4 id="es6-转-es5"><a href="#es6-转-es5" class="header-anchor">#</a> ES6 转 ES5</h4> <p>在 0.10.101000 以及之后版本的开发工具中，会默认使用 <code>babel</code> 将开发者 <code>ES6</code> 语法代码转换为三端都能很好支持的 <code>ES5</code> 的代码，帮助开发者解决环境不同所带来的开发问题。</p> <p>需要注意的是：</p> <ul><li>为了提高代码质量，在开启 <code>ES6</code> 转换功能的情况下，默认启用 <code>javasctipt</code> 严格模式，请参考 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode" target="_blank" rel="noopener noreferrer">&quot;use strict&quot;<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h4 id="增强编译"><a href="#增强编译" class="header-anchor">#</a> 增强编译</h4> <p>在 1.02.1904282 以及之后版本的开发工具中，增加了<code>增强编译</code>的选项来增强<code>ES6转ES5</code>的能力，启用后会使用新的编译逻辑以及提供额外的选项供开发者使用。</p> <p>启用<code>增强编译</code>后的编译能力的对比：</p> <table><thead><tr><th style="text-align:left;">特性</th> <th style="text-align:center;">原有逻辑</th> <th style="text-align:center;">增强编译</th></tr></thead> <tbody><tr><td style="text-align:left;">Babel版本</td> <td style="text-align:center;">babel6</td> <td style="text-align:center;">babel7</td></tr> <tr><td style="text-align:left;">Presets</td> <td style="text-align:center;">es2015、stage0</td> <td style="text-align:center;">env {chrome:53, ios:8}</td></tr> <tr><td style="text-align:left;">Helpers</td> <td style="text-align:center;">单文件内联</td> <td style="text-align:center;">跨文件共享</td></tr> <tr><td style="text-align:left;">Async/Await</td> <td style="text-align:center;">不支持</td> <td style="text-align:center;">支持</td></tr> <tr><td style="text-align:left;">严格模式开关</td> <td style="text-align:center;">不支持</td> <td style="text-align:center;">支持</td></tr> <tr><td style="text-align:left;">忽略文件目录</td> <td style="text-align:center;">不支持</td> <td style="text-align:center;">支持</td></tr> <tr><td style="text-align:left;">代码压缩</td> <td style="text-align:center;">uglify-js</td> <td style="text-align:center;">terser</td></tr> <tr><td style="text-align:left;">Babel插件</td> <td style="text-align:center;">-</td> <td style="text-align:center;">一系列proposal<code>*</code></td></tr> <tr><td style="text-align:left;">polyfill</td> <td style="text-align:center;">大部分es6</td> <td style="text-align:center;">新增三个polyfill<code>*</code></td></tr></tbody></table> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">onLoad</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> songs <span class="token operator">=</span> <span class="token keyword">await</span> lkwx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>url<span class="token punctuation">:</span> <span class="token string">'http://localhost:3000/top/song'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">)</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        songs
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="第三节-媒体api"><a href="#第三节-媒体api" class="header-anchor">#</a> 第三节 媒体API</h3> <h4 id="音频"><a href="#音频" class="header-anchor">#</a> 音频</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> innerAudioContext <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">createInnerAudioContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
innerAudioContext<span class="token punctuation">.</span>autoplay <span class="token operator">=</span> <span class="token boolean">true</span>
innerAudioContext<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'http://ws.stream.qqmusic.qq.com/M500001VfvsJ21xFqb.mp3'</span>
innerAudioContext<span class="token punctuation">.</span><span class="token function">onPlay</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'开始播放'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
innerAudioContext<span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>errMsg<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>errCode<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>案例：</p> <ul><li>网易云音乐</li></ul> <h4 id="图片"><a href="#图片" class="header-anchor">#</a> 图片</h4> <h5 id="选择图片"><a href="#选择图片" class="header-anchor">#</a> 选择图片</h5> <p><code>wx.chooseImage(Object object)</code> 从本地相册选择图片或使用相机拍照。</p> <h5 id="预览图片"><a href="#预览图片" class="header-anchor">#</a> 预览图片</h5> <p><code>wx.previewImage(Object object)</code> 在新页面中全屏预览图片。预览的过程中用户可以进行保存图片、发送给朋友等操作。</p> <p>案例：</p> <ul><li>朋友圈相册</li></ul> <h3 id="第四节-地位api"><a href="#第四节-地位api" class="header-anchor">#</a> 第四节 地位API</h3> <h4 id="选择地址"><a href="#选择地址" class="header-anchor">#</a> 选择地址</h4> <p>使用微信内置地图查看位置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>wx<span class="token punctuation">.</span><span class="token function">chooseLocation</span><span class="token punctuation">(</span>Object object<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>案例：添加地址</p> <h4 id="打开地址"><a href="#打开地址" class="header-anchor">#</a> 打开地址</h4> <p>使用微信内置地图查看位置</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>wx.openLocation(Object object)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>案例：显示每个地址的定位</p> <h4 id="获取当前位置"><a href="#获取当前位置" class="header-anchor">#</a> 获取当前位置</h4> <p>获取当前的地理位置、速度。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>wx.getLocation(Object object)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>案例：计算到目标位置的距离</p> <h3 id="第五节-存储api"><a href="#第五节-存储api" class="header-anchor">#</a> 第五节 存储API</h3> <p>缓存数据</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    wx<span class="token punctuation">.</span><span class="token function">setStorage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        key<span class="token punctuation">:</span> <span class="token constant">LOCATIONS</span><span class="token punctuation">,</span>
        data<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>locations<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>读取缓存</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    wx<span class="token punctuation">.</span><span class="token function">getStorage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        key<span class="token punctuation">:</span> <span class="token constant">LOCATIONS</span><span class="token punctuation">,</span>
        <span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                locations<span class="token punctuation">:</span> res<span class="token punctuation">.</span>data
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>在调试器管理缓存</p> <p>案例：缓存地址列表</p> <h3 id="第五节-扫码"><a href="#第五节-扫码" class="header-anchor">#</a> 第五节 扫码</h3> <p>调起客户端扫码界面进行扫码</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">onScan</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    wx<span class="token punctuation">.</span><span class="token function">scanCode</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                msg<span class="token punctuation">:</span> res<span class="token punctuation">.</span>result
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="第六节-生成二维码"><a href="#第六节-生成二维码" class="header-anchor">#</a> 第六节 生成二维码</h3> <h3 id="第七节-设备-api"><a href="#第七节-设备-api" class="header-anchor">#</a> 第七节 设备 API</h3> <p>案例：</p> <ul><li>充电与充钱</li></ul> <h2 id="第六章-路由"><a href="#第六章-路由" class="header-anchor">#</a> 第六章 路由</h2> <p>在小程序中所有页面的路由全部由框架进行管理 。</p> <p>pages</p> <h3 id="第一节-页面栈"><a href="#第一节-页面栈" class="header-anchor">#</a> 第一节  页面栈</h3> <p>框架以栈的形式维护了当前的所有页面。 当发生路由切换的时候，页面栈的表现如下：</p> <table><thead><tr><th>路由方式</th> <th>页面栈表现</th> <th>触发</th></tr></thead> <tbody><tr><td>初始化</td> <td>新页面入栈</td> <td></td></tr> <tr><td>打开新页面</td> <td>新页面入栈</td> <td>&lt;navigator open-type=&quot;navigateTo&quot;/&gt;</td></tr> <tr><td>页面重定向</td> <td>当前页面出栈，新页面入栈</td> <td>&lt;navigator open-type=&quot;redirectTo&quot;/&gt;</td></tr> <tr><td>页面返回</td> <td>页面不断出栈，直到目标返回页</td> <td>&lt;navigator open-type=&quot;navigateBack&quot;&gt;</td></tr> <tr><td>Tab 切换</td> <td>页面全部出栈，只留下新的 Tab 页面</td> <td>&lt;navigator open-type=&quot;switchTab&quot;/&gt;</td></tr> <tr><td>重加载</td> <td>页面全部出栈，只留下新的页面</td> <td>&lt;navigator open-type=&quot;reLaunch&quot;/&gt;</td></tr></tbody></table> <h4 id="getcurrentpages"><a href="#getcurrentpages" class="header-anchor">#</a> getCurrentPages()</h4> <p><code>getCurrentPages()</code> 函数用于获取当前页面栈的实例，以数组形式按栈的顺序给出，第一个元素为首页，最后一个元素为当前页面。</p> <h4 id="this-route"><a href="#this-route" class="header-anchor">#</a> this.route</h4> <p><code>route</code> 字段可以获取到当前页面的路径。</p> <p>案例：</p> <ul><li>选择地址：设置上一个页面的数据</li></ul> <h3 id="第二节-导航的两种方式"><a href="#第二节-导航的两种方式" class="header-anchor">#</a> 第二节 导航的两种方式</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//wxml</span>
<span class="token operator">&lt;</span>navigator url<span class="token operator">=</span><span class="token string">'/pages/list/list'</span> open<span class="token operator">-</span>type<span class="token operator">=</span><span class="token string">'switchTab'</span><span class="token operator">&gt;</span>list<span class="token operator">&lt;</span><span class="token operator">/</span>navigator<span class="token operator">&gt;</span>

<span class="token comment">//js</span>
wx<span class="token punctuation">.</span><span class="token function">switchTab</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	url<span class="token punctuation">:</span> <span class="token string">'/pages/list/list'</span><span class="token punctuation">,</span> <span class="token comment">//switchTab不能传参</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="第三节-路由传参"><a href="#第三节-路由传参" class="header-anchor">#</a> 第三节 路由传参</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// detail?id=1&amp;page=2</span>
<span class="token comment">//接收页 detail.js</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
   <span class="token function-variable function">onLoad</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//接收传递来的id</span>
    <span class="token keyword">var</span> id<span class="token operator">=</span>options<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>注意：小程序传递参数，只能传递字符串，如果传递数组、对象（json），需要先转换为字符串。</strong></p> <h1 id="第三篇-组件化"><a href="#第三篇-组件化" class="header-anchor">#</a> 第三篇 组件化</h1> <h2 id="第七章-模板"><a href="#第七章-模板" class="header-anchor">#</a> 第七章 模板</h2> <p>WXML 提供两种<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/import.html" target="_blank" rel="noopener noreferrer">文件引用<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>方式<strong>import</strong>和<strong>include</strong>。可以将多个页面中相同的DOM结构，保存为单独文件，通过import和include将代码引入：</p> <table><thead><tr><th>引用方式</th> <th>说明</th></tr></thead> <tbody><tr><td>import</td> <td>引入目标文件中的<code>template</code>模板</td></tr> <tr><td>include</td> <td><code>include</code> 将目标文件<strong>除了</strong> <code>&lt;template/&gt;</code> <code>&lt;wxs/&gt;</code> 外的整个代码引入<br>相当于是拷贝到 <code>include</code> 位置</td></tr></tbody></table> <h3 id="第一节-include"><a href="#第一节-include" class="header-anchor">#</a> 第一节 <code>include</code></h3> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- header.wxml --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span> header <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- footer.wxml --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span> footer <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- index.wxml --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>header.wxml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span> body <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>footer.wxml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>注意：</strong></p> <ul><li><strong>引用文件名大小写敏感！</strong></li></ul> <h3 id="第二节-template"><a href="#第二节-template" class="header-anchor">#</a> 第二节 <code>template</code></h3> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!--wxml--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>manTemp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
    姓: {{firstName}}, 名: {{lastName}}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">is</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>manTemp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{...manA}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">is</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>manTemp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{...manB}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">is</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>manTemp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{...manC}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// page.js</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    manA<span class="token punctuation">:</span> <span class="token punctuation">{</span>firstName<span class="token punctuation">:</span> <span class="token string">'zhang'</span><span class="token punctuation">,</span> lastName<span class="token punctuation">:</span> <span class="token string">'san'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    manB<span class="token punctuation">:</span> <span class="token punctuation">{</span>firstName<span class="token punctuation">:</span> <span class="token string">'li'</span><span class="token punctuation">,</span> lastName<span class="token punctuation">:</span> <span class="token string">'si'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    manC<span class="token punctuation">:</span> <span class="token punctuation">{</span>firstName<span class="token punctuation">:</span> <span class="token string">'wang'</span><span class="token punctuation">,</span> lastName<span class="token punctuation">:</span> <span class="token string">'wu'</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="第三节-import"><a href="#第三节-import" class="header-anchor">#</a> 第三节 <code>import</code></h3> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- temp.wxml --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>{{text}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- index.wxml --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>import</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>temp.wxml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">is</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{text:'forbar'}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="第八章-组件"><a href="#第八章-组件" class="header-anchor">#</a> 第八章 组件</h2> <h3 id="第二节-组件的使用"><a href="#第二节-组件的使用" class="header-anchor">#</a> 第二节 组件的使用</h3> <p>使用第三方组件</p> <h4 id="注册组件"><a href="#注册组件" class="header-anchor">#</a> 注册组件</h4> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;usingComponents&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;lk-user-card&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/components/user-card/index&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="使用组件"><a href="#使用组件" class="header-anchor">#</a> 使用组件</h4> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lk-user-card</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lk-user-card</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="第三节-组件的封装"><a href="#第三节-组件的封装" class="header-anchor">#</a> 第三节 组件的封装</h3> <ul><li>使用 <code>Component()</code>函数创建组件</li> <li>在配置文件中使用 <code>&quot;component&quot;: true</code> 说明这是一个组件</li></ul> <p>案例：</p> <ul><li>footer</li> <li>user-card</li></ul> <h4 id="在组件中使用组件"><a href="#在组件中使用组件" class="header-anchor">#</a> 在组件中使用组件</h4> <h3 id="第四节-组件的属性"><a href="#第四节-组件的属性" class="header-anchor">#</a> 第四节 组件的属性</h3> <p>属性命名</p> <p>类型</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    link1<span class="token punctuation">:</span> String<span class="token punctuation">,</span>
    link2<span class="token punctuation">:</span> String<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>默认值</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    link1<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> String<span class="token punctuation">,</span>
        value<span class="token punctuation">:</span> <span class="token string">'链接1'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
	link2<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> String<span class="token punctuation">,</span>
        value<span class="token punctuation">:</span> <span class="token string">'链接2'</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="第五节-组件的事件"><a href="#第五节-组件的事件" class="header-anchor">#</a> 第五节 组件的事件</h3> <h4 id="触发事件"><a href="#触发事件" class="header-anchor">#</a> 触发事件</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">triggerEvent</span><span class="token punctuation">(</span><span class="token string">'事件名'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>回调数据<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="使用事件"><a href="#使用事件" class="header-anchor">#</a> 使用事件</h4> <div class="language-html line-numbers-mode"><pre class="language-html"><code>bind:事件名=”onXXX“
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="处理事件"><a href="#处理事件" class="header-anchor">#</a> 处理事件</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">onXXX</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// ev.detail 获取回调数据</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="第六节-插槽"><a href="#第六节-插槽" class="header-anchor">#</a> 第六节 插槽</h3> <p>在组件的wxml中可以包含 <code>slot</code> 节点，用于承载组件使用者提供的wxml结构。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>section__hd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{title}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>more<span class="token punctuation">&quot;</span></span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{more}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>查看更多 &gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigator</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>section__bd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>案例：</p> <ul><li>数据条组件 databar</li></ul> <h4 id="多插槽"><a href="#多插槽" class="header-anchor">#</a> 多插槽</h4> <p>默认情况下，一个组件的wxml中只能有一个slot。需要使用多slot时，可以在组件js中声明启用。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    multipleSlots<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token comment">// 在组件定义时的选项中启用多slot支持</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  properties<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="第七节-组件生命周期"><a href="#第七节-组件生命周期" class="header-anchor">#</a> 第七节 组件生命周期</h3> <p>组件的生命周期，指的是组件自身的一些函数，这些函数在特殊的时间点或遇到一些特殊的框架事件时被自动触发。其中，最重要的生命周期是 <code>created</code> <code>attached</code> <code>detached</code> ，包含一个组件实例生命流程的最主要时间点。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  lifetimes<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">attached</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 在组件实例进入页面节点树时执行</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">detached</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 在组件实例被从页面节点树移除时执行</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="第九章-管理后台"><a href="#第九章-管理后台" class="header-anchor">#</a> 第九章 管理后台</h2> <h3 id="云服务"><a href="#云服务" class="header-anchor">#</a> 云服务</h3> <p>案例：</p> <ul><li>多图上传</li></ul> <h3 id="客服"><a href="#客服" class="header-anchor">#</a> 客服</h3> <h3 id="上线发布"><a href="#上线发布" class="header-anchor">#</a> 上线发布</h3> <h2 id="第十章-小程序框架"><a href="#第十章-小程序框架" class="header-anchor">#</a> 第十章 小程序框架</h2> <h3 id="第一节-发展现状"><a href="#第一节-发展现状" class="header-anchor">#</a> 第一节 发展现状</h3> <h4 id="web前端框架发展现状"><a href="#web前端框架发展现状" class="header-anchor">#</a> Web前端框架发展现状</h4> <ul><li>VUE</li> <li>angular</li> <li>React</li></ul> <h4 id="小程序框架发展现状"><a href="#小程序框架发展现状" class="header-anchor">#</a> 小程序框架发展现状</h4> <h3 id="第二节-mpx介绍"><a href="#第二节-mpx介绍" class="header-anchor">#</a> 第二节 MPX介绍</h3> <h4 id="mpx安装"><a href="#mpx安装" class="header-anchor">#</a> MPX安装</h4> <h4 id="mpx的使用"><a href="#mpx的使用" class="header-anchor">#</a> MPX的使用</h4> <h3 id="第三节-mpx的特性与底层原理"><a href="#第三节-mpx的特性与底层原理" class="header-anchor">#</a> 第三节 MPX的特性与底层原理</h3> <h4 id="渐进式接入"><a href="#渐进式接入" class="header-anchor">#</a> 渐进式接入</h4> <h4 id="单文件"><a href="#单文件" class="header-anchor">#</a> 单文件</h4> <p>IDE插件</p> <p>第三节 NPM包的使用</p> <p>使用vant-weapp</p> <p>less less-loader</p> <p>template 增强</p> <h4 id="类与样式扩展"><a href="#类与样式扩展" class="header-anchor">#</a> 类与样式扩展</h4> <h4 id="内联事件函数"><a href="#内联事件函数" class="header-anchor">#</a> 内联事件函数</h4> <p>bind:tap=&quot;foo&quot;</p> <p>bind:tap=&quot;foo($event, p1, p2)&quot;</p> <h4 id="监听器与计算属性"><a href="#监听器与计算属性" class="header-anchor">#</a> 监听器与计算属性</h4> <p>{</p> <p>​	data:{</p> <p>​		a: 1</p> <p>​	},</p> <p>​	methods:｛</p> <p>​	},</p> <p>​	watch: {
​		a: function(newValue, oldValue) {</p> <p>​		}</p> <p>​	}</p> <p>}</p> <h4 id="内核包"><a href="#内核包" class="header-anchor">#</a> 内核包</h4> <h4 id="状态管理"><a href="#状态管理" class="header-anchor">#</a> 状态管理</h4> <p>使用Vant</p> <h2 id="附录："><a href="#附录：" class="header-anchor">#</a> 附录：</h2> <h3 id="第三方组件"><a href="#第三方组件" class="header-anchor">#</a> 第三方组件</h3> <h4 id="weui-2"><a href="#weui-2" class="header-anchor">#</a> weUI</h4> <p><a href="https://weui.io" target="_blank" rel="noopener noreferrer">WeUI<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 是一套同微信原生视觉体验一致的基础样式库，由微信官方设计团队为微信内网页和微信小程序量身设计，令用户的使用感知更加统一。 <a href="https://github.com/Tencent/weui-wxss/" target="_blank" rel="noopener noreferrer">下载<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="wx-promise-pro"><a href="#wx-promise-pro" class="header-anchor">#</a> wx-promise-pro</h4> <h4 id="wxparse"><a href="#wxparse" class="header-anchor">#</a> wxParse</h4> <p><a href="https://github.com/icindy/wxParse" target="_blank" rel="noopener noreferrer">wxParse<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>微信小程序富文本解析组件，支持Html及markdown转wxml可视化</p> <h3 id="小程序快捷键"><a href="#小程序快捷键" class="header-anchor">#</a> 小程序快捷键</h3> <table><thead><tr><th>快捷键</th> <th>说明</th></tr></thead> <tbody><tr><td>Ctrl+S</td> <td>保存文件</td></tr> <tr><td>Ctrl+[， Ctrl+]</td> <td>代码行缩进</td></tr> <tr><td>Ctrl+Shift+[， Ctrl+Shift+]</td> <td>折叠打开代码块</td></tr> <tr><td>Ctrl+C Ctrl+V</td> <td>复制粘贴，如果没有选中任何文字则复制粘贴一行</td></tr> <tr><td>Shift+Alt+F</td> <td>代码格式化</td></tr> <tr><td>Alt+Up，Alt+Down</td> <td>上下移动一行</td></tr> <tr><td>Shift+Alt+Up，Shift+Alt+Down</td> <td>向上向下复制一行</td></tr> <tr><td>Ctrl+Shift+Enter</td> <td>在当前行上方插入一行</td></tr> <tr><td>Ctrl+End</td> <td>移动到文件结尾</td></tr> <tr><td>Ctrl+Home</td> <td>移动到文件开头</td></tr> <tr><td>Ctrl+i</td> <td>选中当前行</td></tr> <tr><td>Shift+End</td> <td>选择从光标到行尾</td></tr> <tr><td>Shift+Home</td> <td>选择从行首到光标处</td></tr> <tr><td>Ctrl+Shift+L</td> <td>选中所有匹配</td></tr> <tr><td>Ctrl+D</td> <td>选中匹配</td></tr> <tr><td>Ctrl+U</td> <td>光标回退</td></tr></tbody></table></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/li-kang/WebNotes/edit/master/docs/notes/微信小程序/readme.md" target="_blank" rel="noopener noreferrer">维护文档</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">9/15/2020, 8:32:27 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.36f33a9d.js" defer></script><script src="/assets/js/2.d27f56d2.js" defer></script><script src="/assets/js/28.50943c3b.js" defer></script>
  </body>
</html>